<h1>karaoketier</h1>
<h3>ÊäïÁ®øË©≥Á¥∞</h3>
<%# --- ‚ñº‚ñº‚ñº „Åì„Åì„Åã„ÇâÂÖ®‰Ωì„ÇíÁΩÆ„ÅçÊèõ„Åà ‚ñº‚ñº‚ñº --- %>
<div class="detail-page-container">

  <div class="detail-main-layout">
    <div class="detail-left-card">
      
      <div class="detail-image-area">
        <% if @tweet.image.attached? %>
          <%= image_tag @tweet.image %>
        <% else %>
          <div class="no-image-text">no image</div>
        <% end %>
      </div>

      <div class="detail-info">
        <p class="song-title"><%= @tweet.song %></p>
        <p class="artist-name"><%= @tweet.artist %></p>
      </div>

      <%# --- ÊäïÁ®øËÄÖ„ÅÆ„Åø„Å´Ë°®Á§∫„Åï„Çå„ÇãÁ∑®ÈõÜ„ÉªÂâäÈô§„Éú„Çø„É≥ --- %>
      <% if user_signed_in? && current_user.id == @tweet.user_id %>
        <div class="owner-actions">
          <%= link_to "Á∑®ÈõÜ", edit_tweet_path(@tweet.id), class: 'edit-link' %>
          <%= button_to "ÂâäÈô§", tweet_path(@tweet.id), method: :delete, class: 'delete-button', data: { confirm: 'Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü' } %>
        </div>
      <% end %>

    </div>

    <div class="detail-right-metrics">
      
      <div class="metric-group">
        <h3>Èõ£ÊòìÂ∫¶</h3>
        <div class="metric-bar-container">
          <div class="metric-bar" style="width: <%= @tweet.difficulty.to_f * 10 %>%;"></div>
        </div>
        <span class="metric-value"><%= @tweet.difficulty.to_f.round(1) %></span>
      </div>
      
      <div class="metric-group">
        <h3>Áü•ÂêçÂ∫¶</h3>
        <div class="metric-bar-container">
          <div class="metric-bar" style="width: <%= @tweet.fame.to_f * 10 %>%;"></div>
        </div>
        <span class="metric-value"><%= @tweet.fame.to_f.round(1) %></span>
      </div>

      <%# --- „ÅÑ„ÅÑ„Å≠Ê©üËÉΩ --- %>
      <div class="like-section">
        <% if user_signed_in? %>
          <% if current_user.already_liked?(@tweet) %>
            <%= button_to tweet_like_path(@tweet), method: :delete, class: 'like-button unlike' do %>
              ‚ù§Ô∏è „ÅÑ„ÅÑ„Å≠„ÇíÂèñ„ÇäÊ∂à„Åô (<%= @tweet.likes.count %>)
            <% end %>
          <% else %>
            <%= button_to tweet_likes_path(@tweet), method: :post, class: 'like-button' do %>
              ü§ç „ÅÑ„ÅÑ„Å≠„Åô„Çã (<%= @tweet.likes.count %>)
            <% end %>
          <% end %>
        <% else %>
          <p class="like-count">‚ù§Ô∏è <%= @tweet.likes.count %> „ÅÑ„ÅÑ„Å≠</p>
        <% end %>
      </div>
      
    </div>
  </div>

  <div class="back-link-container">
    <%= link_to "‰∏ÄË¶ß„Å´Êàª„Çã", tweets_path, class: 'back-link' %>
  </div>

</div>
<%# --- ‚ñ≤‚ñ≤‚ñ≤ „Åì„Åì„Åæ„ÅßÂÖ®‰Ωì„ÇíÁΩÆ„ÅçÊèõ„Åà ‚ñ≤‚ñ≤‚ñ≤ --- %>